{% comment %}
  Section: Comparison Table - Dary Ross
  Compatible OS2.0 (Impact, etc.)
{% endcomment %}

<section id="comparison-{{ section.id }}" class="comparison-wrapper">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="cmp-heading">
        {{ section.settings.heading | escape }}
        {% if section.settings.heading_emphasis != blank %}
          <em>{{ section.settings.heading_emphasis | escape }}</em>
        {% endif %}
      </h2>
    {% endif %}

    {% if section.settings.subtitle != blank %}
      <p class="cmp-subtitle">{{ section.settings.subtitle }}</p>
    {% endif %}

    <div class="cmp-table" role="table" aria-label="{{ section.settings.heading | default: 'Comparaison' }}">
      <div class="cmp-row cmp-header" role="row">
        <div class="cmp-col cmp-col--feature" role="columnheader" aria-hidden="true"></div>
        <div class="cmp-col cmp-col--ours" role="columnheader">
          {{ section.settings.col_ours }}
          {% if section.settings.ours_badge != blank %}
            <span class="badge">{{ section.settings.ours_badge }}</span>
          {% endif %}
        </div>
        <div class="cmp-col cmp-col--others" role="columnheader">{{ section.settings.col_others }}</div>
      </div>

      {% for block in section.blocks %}
        {% assign ours = block.settings.ours_has %}
        {% assign others = block.settings.others_has %}
        <div class="cmp-row" role="row" {{ block.shopify_attributes }}>
          <div class="cmp-col cmp-col--feature" role="cell">
            {% if section.settings.show_icons %}
              <span class="feature-icon" aria-hidden="true">
                <!-- simple star outline -->
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M12 17.3l-5.5 3 1.4-6.1L3 9.7l6.2-.6L12 3.5l2.8 5.6 6.2.6-4 4.5 1.4 6.1-5.5-3z"/>
                </svg>
              </span>
            {% endif %}
            <span class="feature-text">{{ block.settings.feature | escape }}</span>
          </div>

          <div class="cmp-col cmp-col--ours" role="cell" aria-label="{{ section.settings.col_ours }}">
            {% if ours %}
              <span class="icon icon--check" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
                  <path d="M9.0 16.2l-3.8-3.8-1.4 1.4 5.2 5.2L20.2 8.8l-1.4-1.4z"/>
                </svg>
              </span>
              <span class="sr-only">Oui</span>
            {% else %}
              <span class="icon icon--cross" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
                  <path d="M18.3 5.7L12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3z"/>
                </svg>
              </span>
              <span class="sr-only">Non</span>
            {% endif %}
          </div>

          <div class="cmp-col cmp-col--others" role="cell" aria-label="{{ section.settings.col_others }}">
            {% if others %}
              <span class="icon icon--check" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
                  <path d="M9.0 16.2l-3.8-3.8-1.4 1.4 5.2 5.2L20.2 8.8l-1.4-1.4z"/>
                </svg>
              </span>
              <span class="sr-only">Oui</span>
            {% else %}
              <span class="icon icon--cross" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
                  <path d="M18.3 5.7L12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3z"/>
                </svg>
              </span>
              <span class="sr-only">Non</span>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <style>
    #comparison-{{ section.id }}{
      --cmp-radius: 14px;
      --cmp-border: 1px solid rgba(0,0,0,.08);
      --cmp-muted: rgba(0,0,0,.6);
      --cmp-bg: {{ section.settings.bg_color }};
      --cmp-highlight: {{ section.settings.highlight_color }};
    }
    #comparison-{{ section.id }} .container{
      max-width: {{ section.settings.max_width }}px;
      margin: 0 auto;
      padding: clamp(32px, 4vw, 72px) 16px;
      background: var(--cmp-bg);
      border-radius: var(--cmp-radius);
    }
    #comparison-{{ section.id }} .cmp-heading{
      text-align:center;
      font-weight:800;
      letter-spacing:-.02em;
      margin:0 0 8px;
      font-size: clamp(22px, 4.2vw, 40px);
    }
    #comparison-{{ section.id }} .cmp-heading em{ font-style:italic; opacity:.9; }
    #comparison-{{ section.id }} .cmp-subtitle{
      text-align:center;
      margin: 0 auto 28px;
      max-width: 780px;
      color: var(--cmp-muted);
      line-height:1.6;
    }
    #comparison-{{ section.id }} .cmp-table{
      display: grid;
      grid-template-columns: 1.4fr .8fr .8fr;
      border-top: var(--cmp-border);
      border-left: var(--cmp-border);
      border-radius: var(--cmp-radius);
      overflow: hidden;
    }
    #comparison-{{ section.id }} .cmp-row{
      display: contents; /* each row is 3 grid cells */
    }
    #comparison-{{ section.id }} .cmp-col{
      padding: 16px 18px;
      border-right: var(--cmp-border);
      border-bottom: var(--cmp-border);
      display:flex; align-items:center; gap:10px;
      background:#fff;
    }
    #comparison-{{ section.id }} .cmp-header .cmp-col{
      font-weight:700;
      justify-content:center;
      text-align:center;
      background: #f7f7f7;
    }
    #comparison-{{ section.id }} .cmp-col--feature{
      justify-content:flex-start;
      text-align:left;
      background: linear-gradient(0deg,#fff,#fff);
    }
    #comparison-{{ section.id }} .cmp-col--ours{
      background: linear-gradient(0deg, var(--cmp-highlight), var(--cmp-highlight));
    }
    #comparison-{{ section.id }} .badge{
      display:inline-flex; align-items:center;
      font-size:.8rem; padding:.18rem .5rem; border-radius:999px;
      border:1px solid rgba(0,0,0,.08); background:#fff;
      margin-left:.5rem;
    }
    #comparison-{{ section.id }} .icon{
      width:22px; height:22px; display:inline-flex;
      align-items:center; justify-content:center;
      border-radius:999px;
    }
    #comparison-{{ section.id }} .icon--check{ color:#111; background:#1111; }
    #comparison-{{ section.id }} .icon--cross{ color:#111; opacity:.7; }
    #comparison-{{ section.id }} .feature-icon{ opacity:.6 }
    #comparison-{{ section.id }} .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;
    }

    /* Mobile stack */
    @media (max-width: 720px){
      #comparison-{{ section.id }} .cmp-table{
        grid-template-columns: 1fr;
      }
      #comparison-{{ section.id }} .cmp-header{ display:none; }
      #comparison-{{ section.id }} .cmp-row{
        display:block;
      }
      #comparison-{{ section.id }} .cmp-col{
        border-right: var(--cmp-border);
      }
      #comparison-{{ section.id }} .cmp-col--feature{
        border-bottom: none;
        padding-bottom:10px;
        font-weight:600;
      }
      #comparison-{{ section.id }} .cmp-col--ours,
      #comparison-{{ section.id }} .cmp-col--others{
        display:flex; justify-content:space-between;
      }
      #comparison-{{ section.id }} .cmp-col--ours::before{
        content: "{{ section.settings.col_ours | escape }}";
        font-weight:600;
      }
      #comparison-{{ section.id }} .cmp-col--others::before{
        content: "{{ section.settings.col_others | escape }}";
        font-weight:600;
      }
    }
  </style>
</section>

{% schema %}
{
  "name": "Comparaison NvsA",
  "settings": [
    { "type": "text", "id": "heading", "label": "Titre", "default": "Pourquoi la plupart des produits capillaires manquent —" },
    { "type": "text", "id": "heading_emphasis", "label": "Titre (italique après le tiret)", "default": "et le nôtre ne le fait pas" },
    { "type": "textarea", "id": "subtitle", "label": "Sous-titre", "default": "Nous avons conçu Dary Ross pour les hommes qui en ont assez des fausses promesses, des formules grasses et des médicaments agressifs. Simple. Propre. Approuvé par de véritables recherches sur les ingrédients." },

    { "type": "text", "id": "col_ours", "label": "Libellé colonne — Nous", "default": "Nous" },
    { "type": "text", "id": "ours_badge", "label": "Badge (optionnel)", "default": "Original" },
    { "type": "text", "id": "col_others", "label": "Libellé colonne — Autres", "default": "Autres" },

    { "type": "checkbox", "id": "show_icons", "label": "Afficher l'icône de puce à gauche", "default": true },
    { "type": "color", "id": "highlight_color", "label": "Fond colonne \"Nous\"", "default": "#f0f7f2" },
    { "type": "color", "id": "bg_color", "label": "Fond encart", "default": "#ffffff" },
    { "type": "range", "id": "max_width", "min": 700, "max": 1400, "step": 10, "unit": "px", "label": "Largeur max du bloc", "default": 980 }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Ligne de comparaison",
      "settings": [
        { "type": "text", "id": "feature", "label": "Bénéfice / Caractéristique", "default": "Favorise une ligne de cheveux plus fournie" },
        { "type": "checkbox", "id": "ours_has", "label": "Nous: ✓", "default": true },
        { "type": "checkbox", "id": "others_has", "label": "Autres: ✓", "default": false }
      ]
    }
  ],
  "presets": [
    {
      "name": "Comparaison (Dary Ross)",
      "blocks": [
        { "type": "feature" },
        { "type": "feature", "settings": { "feature": "Formule non grasse", "ours_has": true, "others_has": false } },
        { "type": "feature", "settings": { "feature": "Pas de produits chimiques agressifs ni de minoxidil", "ours_has": true, "others_has": false } },
        { "type": "feature", "settings": { "feature": "Application facile au roll-on", "ours_has": true, "others_has": false } },
        { "type": "feature", "settings": { "feature": "Léger et à absorption rapide", "ours_has": true, "others_has": false } },
        { "type": "feature", "settings": { "feature": "Conçu pour l'éclaircissage précoce", "ours_has": true, "others_has": false } }
      ]
    }
  ]
}
{% endschema %}
